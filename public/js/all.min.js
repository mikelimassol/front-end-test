!function(){angular.module("qudini.QueueApp",[])}(),function(){function e(e){function t(){return e._getServedCustomers().then(function(e){n.customersServed=e})}function r(){return e._getCustomers().then(function(e){n.customers=e})}var n=this;n.customers=[],n.customersServed=[],r(),t(),n.onCustomerAdded=function(){r()},n.onCustomerRemoved=function(){r()},n.onCustomerServed=function(){r(),t()}}angular.module("qudini.QueueApp").controller("QueueController",["QueueService",e])}(),function(){function e(e){var t={getServedCustomersUrl:"/api/customers/served",getCustomersUrl:"/api/customers",removeCustomerUrl:"/api/customer/remove",addCustomerUrl:"/api/customer/add",serveCustomerUrl:"/api/customer/serve"},r=function(){return e.get(t.getServedCustomersUrl).then(function(e){return e.data})},n=function(){return e.get(t.getCustomersUrl).then(function(e){return e.data})},u=function(r){return e({method:"DELETE",url:t.removeCustomerUrl,params:{id:r}}).then(function(e){return e})},o=function(r){return e.post(t.addCustomerUrl,r).then(function(e){return e})},s=function(r){return e.post(t.serveCustomerUrl,{id:r}).then(function(e){return e})};return{_getServedCustomers:r,_getCustomers:n,_removeCustomer:u,_addCustomer:o,_serveCustomer:s}}angular.module("qudini.QueueApp").factory("QueueService",["$http",e])}(),function(){function e(e){return{restrict:"E",scope:{onAdded:"&"},templateUrl:"/components/directives/add-customer/add-customer.html",link:function(t){t.products=[{name:"Grammatical advice"},{name:"Magnifying glass repair"},{name:"Cryptography advice"}],t.add=function(){e._addCustomer(t.customer).then(function(e){t.onAdded()(),t.customer={}})}}}}angular.module("qudini.QueueApp").directive("addCustomer",["QueueService",e])}(),function(){function e(e,t){return{restrict:"E",scope:{customer:"=",onRemoved:"&",onServed:"&"},templateUrl:"/components/directives/customer/customer.html",link:function(r){var n=function(e){var t=new Date(e);r.days=t.getUTCDate()-1,r.hours=t.getUTCHours(),r.minutes=t.getUTCMinutes(),r.seconds=t.getUTCSeconds()},u=function(e){return new Date-new Date(e.toString())},o=function(){n(u(r.customer.joinedTime))},s=function(){r.isServed="served"===r.customer.status};s(),o(),t(o,5e3),r.remove=function(){e._removeCustomer(r.customer.id).then(function(e){r.onRemoved()()})},r.serve=function(){e._serveCustomer(r.customer.id).then(function(e){r.onServed()()})}}}}angular.module("qudini.QueueApp").directive("customer",["QueueService","$interval",e])}();